<!DOCTYPE html>
<html lang="es" class="dark:bg-gray-900">
<head>
    <!-- Critical CSS -->
    <style>
        .header-container {
            min-height: 200px; /* Reserve space for header */
            contain: layout;
        }
        .text-center { text-align: center; }
        .mb-12 { margin-bottom: 3rem; }
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        @media (min-width: 640px) {
            .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
            .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        }
        @media (min-width: 768px) {
            .text-5xl { font-size: 3rem; line-height: 1; }
        }
    </style>
    
    <!-- Preload critical CSS -->
    <link rel="preload" href="dist/output.css" as="style">
    <link rel="preload" href="public/css/select2.min.css" as="style">
    <link rel="preload" href="styles.css" as="style">
    
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¡Qué te dé su IBAN Marlaska! 🏨</title>
    <meta name="description" content="Generador satírico de datos para hoteles españoles. Una respuesta humorística al nuevo registro obligatorio SES.HOSPEDAJES.">
    <meta name="keywords" content="SES.HOSPEDAJES, registro viajeros españa, marlaska hoteles, datos hospedaje españa, registro obligatorio hoteles, sátira política españa">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://quetedesuibanmarlaska.com/">
    <meta property="og:title" content="¡Qué te dé su IBAN Marlaska! 🏨">
    <meta property="og:description" content="Generador satírico de datos para hoteles españoles. Una respuesta humorística al nuevo registro obligatorio SES.HOSPEDAJES.">
    <meta property="og:image" content="https://quetedesuibanmarlaska.com/images/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://quetedesuibanmarlaska.com/">
    <meta property="twitter:title" content="¡Qué te dé su IBAN Marlaska! 🏨">
    <meta property="twitter:description" content="Generador satírico de datos para hoteles españoles. Una respuesta humorística al nuevo registro obligatorio SES.HOSPEDAJES.">
    <meta property="twitter:image" content="https://quetedesuibanmarlaska.com/images/twitter-image.jpg">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

    <!-- Canonical URL -->
    <meta rel="canonical" href="https://quetedesuibanmarlaska.com/">

    <!-- Local Dependencies -->
    <link href="dist/output.css" rel="stylesheet">
    <link href="public/css/select2.min.css" rel="stylesheet" />
    <script defer src="public/js/jquery.min.js"></script>
    <script defer src="public/js/select2.min.js"></script>
    <link rel="stylesheet" href="styles.css">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "¡Qué te dé su IBAN Marlaska!",
      "description": "Generador satírico de datos para hoteles españoles en respuesta al nuevo registro obligatorio SES.HOSPEDAJES",
      "url": "https://quetedesuibanmarlaska.com",
      "applicationCategory": "WebApplication",
      "genre": "Sátira política",
      "about": {
        "@type": "Thing",
        "name": "SES.HOSPEDAJES"
      },
      "audience": {
        "@type": "Audience",
        "audienceType": "Sector hotelero español"
      }
    }
    </script>
    
</head>
<body class="bg-white dark:bg-gray-900 min-h-screen">
    <div id="cookieBanner" class="fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 text-gray-900 dark:text-white p-4 shadow-lg transform transition-transform duration-300 translate-y-full z-50 border-t-2 border-gray-200 dark:border-gray-700">
        <div class="max-w-3xl mx-auto">
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                <div class="flex-grow">
                    <p class="text-sm sm:text-base mb-2">
                        🍪 ¡Hola! A diferencia de otros, nosotros no necesitamos 42 datos personales y sensibles tuyos. 
                        Solo usamos algunas cookies técnicas y analíticas para asegurarnos de que todo funciona correctamente.
                    </p>
                    <p class="text-xs text-gray-600 dark:text-gray-300 italic">
                        * Somos transparentes: solo recogemos datos técnicos básicos para analizar el funcionamiento de la web.
                        Nada de IBANs, tarjetas de crédito ni datos personales sensibles.
                    </p>
                </div>
                <div class="flex gap-2">
                    <button id="acceptCookies" class="bg-green-800 hover:bg-green-900 text-white px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors">
                        Vale, ok
                    </button>
                    <button id="rejectCookies" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors">
                        No, gracias
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="max-w-3xl mx-auto px-4 sm:px-6 py-8">
        <!-- Featured Image -->
        <div class="mb-12">
            <picture class="block aspect-[16/9] w-full">
                <source srcset="images/image.webp" type="image/webp">
                <source srcset="images/og-image.jpg" type="image/jpeg">
                <img 
                    src="images/og-image.jpg" 
                    alt="¡Qué te dé su IBAN Marlaska!" 
                    class="w-full h-full object-cover rounded-lg shadow-lg" 
                    width="1200"
                    height="675"
                    loading="eager"
                >
            </picture>
        </div>

        <!-- Introducción -->
        <header class="header-container text-center mb-12">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">¡Qué te dé su IBAN Marlaska! 🏨</h1>
            <p class="text-lg sm:text-xl text-gray-600 dark:text-gray-300 mb-4">Generador satírico de datos para hoteles españoles</p>
            <p class="text-sm text-gray-500 dark:text-gray-400 italic">⚠️ Esto es una sátira. Todos los datos generados son ficticios.</p>
            <div class="mt-6 text-base sm:text-lg text-gray-700 dark:text-gray-300">
                <p class="mb-3">Desde el 2 de diciembre, tienes que compartir <strong>42 datos personales</strong> cada vez que te hospedes en un hotel. 😱</p>
                <p>Así es, el <strong><a href="https://www.boe.es/diario_boe/txt.php?id=BOE-A-2021-17461" class="text-blue-600 dark:text-blue-400 hover:underline">Real Decreto 933/2021</a></strong> ya ha implementado el sistema <strong>SES.HOSPEDAJES</strong>. Queremos contártelo de forma divertida... o no tanto. 😉</p>
            </div>
        </header>

        <!-- Botón de Navegación -->
        <section class="flex justify-center mb-12">
            <button onclick="document.getElementById('generadorSection').scrollIntoView({behavior: 'smooth'})" 
                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                Ir al Generador ⬇️
            </button>
        </section>

        <!-- Contexto -->
        <section class="prose prose-base sm:prose-lg dark:prose-invert mx-auto mb-12">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-6">El Gran Hermano Hotelero está aquí 👁️</h2>
            <p class="text-base sm:text-lg leading-relaxed mb-4 dark:text-gray-300">Desde el <strong>2 de diciembre de 2023</strong>, si visitas un hotel en España, prepárate para un check-in más... íntimo. El Ministerio del Interior ha puesto en marcha el sistema <strong>SES.HOSPEDAJES</strong>, que obliga a los establecimientos turísticos a recopilar hasta <strong>42 datos personales</strong> por huésped. 📝</p>
            <p class="text-base sm:text-lg leading-relaxed mb-4 dark:text-gray-300">Entre estos datos se incluyen información tan sensible como tu <strong>IBAN</strong> y los <strong>números de tu tarjeta de crédito</strong>. 💳 Sí, has leído bien. Todo esto será almacenado durante <strong>tres años</strong>. ⏳</p>
            <p class="text-base sm:text-lg leading-relaxed mb-4 dark:text-gray-300">Esta normativa es una iniciativa española y <strong>no proviene de ninguna directiva europea</strong>. 🇪🇸❌ De hecho, podría entrar en conflicto con las leyes de protección de datos de la Unión Europea. 🔒</p>
            <p class="text-base sm:text-lg leading-relaxed mb-4 dark:text-gray-300">El sector turístico no está contento. 🏨 La <a href="https://www.cehat.com/" class="text-blue-600 dark:text-blue-400 hover:underline">Confederación Española de Hoteles (CEHAT)</a> está preparando acciones legales, argumentando que esta medida vulnera la privacidad de los viajeros y sobrecarga al sector con más burocracia. 📑</p>
            <p class="text-base sm:text-lg leading-relaxed dark:text-gray-300">¿Y tú, qué opinas? 🤔</p>
        </section>

        <!-- Generador de Datos -->
        <section id="generadorSection" class="mb-12">
            <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-6">Generador de Datos Satíricos 🎲</h2>
            <div class="bg-gray-50 dark:bg-gray-800 rounded-xl shadow-sm p-4 sm:p-6">
                <div class="mb-6 space-y-4">
                    <label for="selectedCity" class="block text-base sm:text-lg font-medium text-gray-700 dark:text-gray-300">Ciudad para generar datos:</label>
                    <div class="flex flex-row gap-4">
                        <div class="flex-grow">
                            <select id="selectedCity" class="w-full p-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg hover:border-gray-400 focus:outline-none focus:border-blue-500 transition-colors">
                                <option value="">Selecciona una ciudad...</option>
                            </select>
                        </div>
                        <button id="randomCityBtn" class="w-auto flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 p-3 rounded-lg transition-colors" title="Ciudad aleatoria">🎲</button>
                    </div>
                    <button id="generateBtn" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg text-base sm:text-lg font-medium hover:bg-blue-700 transition-colors">
                        Generar Datos Aleatorios 🎲
                    </button>
                </div>

                <div id="resultCard" class="hidden border-2 border-gray-200 dark:border-gray-700 rounded-lg p-4 sm:p-6 space-y-4">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4">
                        <h3 class="text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white">Datos Generados</h3>
                        <button id="copyBtn" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium">
                            📋 Copiar Todo
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 items-center">
                            <span class="text-gray-700 dark:text-gray-300 text-base sm:text-lg">Nombre:</span>
                            <div class="flex items-center space-x-2">
                                <input type="text" id="fullName" class="font-medium flex-grow p-2 border-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded hover:border-gray-400 focus:outline-none focus:border-blue-500">
                                <button class="copy-btn text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300" data-field="fullName">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">DNI/NIE:</span>
                            <div class="flex items-center space-x-2">
                                <span id="idNumber" class="font-medium flex-grow dark:text-white"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="idNumber">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">IDSEP (Nº Soporte DNI):</span>
                            <div class="flex items-center space-x-2">
                                <span id="idsep" class="font-medium flex-grow dark:text-white"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="idsep">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">Teléfono Fijo:</span>
                            <div class="flex items-center space-x-2">
                                <span id="landlinePhone" class="font-medium flex-grow dark:text-white"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="landlinePhone">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">Teléfono Móvil:</span>
                            <div class="flex items-center space-x-2">
                                <span id="mobilePhone" class="font-medium flex-grow dark:text-white"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="mobilePhone">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">IBAN:</span>
                            <div class="flex items-center space-x-2">
                                <span id="iban" class="font-medium flex-grow dark:text-white break-all"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="iban">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">Fecha de Nacimiento:</span>
                            <div class="flex items-center space-x-2">
                                <span id="birthDate" class="font-medium flex-grow dark:text-white"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="birthDate">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">Ciudad:</span>
                            <div class="flex items-center space-x-2">
                                <span id="city" class="font-medium flex-grow dark:text-white"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="city">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">Dirección Completa:</span>
                            <div class="flex items-center space-x-2">
                                <span id="address" class="font-medium flex-grow dark:text-white break-words"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="fullAddress">📋</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 items-center">
                            <span class="text-gray-600 dark:text-gray-400">Código Postal:</span>
                            <div class="flex items-center space-x-2">
                                <span id="postalCode" class="font-medium flex-grow dark:text-white"></span>
                                <button class="copy-btn text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300" data-field="postalCode">📋</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Historial -->
        <section class="mb-12">
            <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-6">Historial de Datos Generados 📜</h2>
            <div class="bg-gray-50 dark:bg-gray-800 rounded-xl shadow-sm p-4 sm:p-6">
                <button id="toggleHistoryBtn" class="w-full flex justify-between items-center py-3 px-4 rounded-lg text-base sm:text-lg font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-800">
                    <span class="flex items-center gap-3 dark:text-white">📜 Historial</span>
                    <span id="historyCount" class="text-gray-500 dark:text-gray-300">0 registros</span>
                </button>
                <div id="historySection" class="hidden mt-6">
                    <div class="grid grid-cols-3 gap-2">
                        <button id="exportHistoryBtn" class="bg-blue-600 text-white px-2 py-2 rounded-lg hover:bg-blue-700 text-xs sm:text-base truncate">
                            📤 Exportar
                        </button>
                        <button id="importHistoryBtn" class="bg-yellow-600 text-white px-2 py-2 rounded-lg hover:bg-yellow-700 text-xs sm:text-base truncate">
                            📥 Importar
                        </button>
                        <button id="clearHistoryBtn" class="bg-red-600 text-white px-2 py-2 rounded-lg hover:bg-red-700 hidden text-xs sm:text-base truncate">
                            🗑️ Borrar Todo
                        </button>
                        <input type="file" id="importFileInput" accept=".json" class="hidden">
                    </div>
                    <div id="historyList" class="space-y-4 mt-6">
                        <!-- History items will be dynamically added here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Información Detallada -->
        <section class="prose prose-base sm:prose-lg dark:prose-invert mx-auto mb-12">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-6">Una Historia de Vigilancia y Datos: El Nuevo Registro de Viajeros</h2>
            <p class="text-base sm:text-lg leading-relaxed mb-4 dark:text-gray-300">Desde el 2 de diciembre, al registrarte en un hotel, tienes que entregar no solo tu DNI, sino también tu dirección, número de teléfono, email, IBAN, número de tarjeta y más. 😳 Esta es la realidad que ha traído el <strong><a href="https://www.boe.es/diario_boe/txt.php?id=BOE-A-2021-17461" class="text-blue-600 dark:text-blue-400 hover:underline">Real Decreto 933/2021</a></strong>.</p>
            <p class="text-base sm:text-lg leading-relaxed mb-4 dark:text-gray-300">El Ministerio del Interior justifica esta medida como una forma de combatir el terrorismo y el crimen organizado. 🕵️‍♂️ Sin embargo, muchos cuestionan si recopilar tal cantidad de información de todos los viajeros es realmente necesario o si es una invasión a la privacidad. 🚨</p>
            <p class="text-base sm:text-lg leading-relaxed mb-4 dark:text-gray-300">Además, el <strong>Tribunal de Justicia de la Unión Europea</strong> ha dictaminado que la recopilación masiva de datos solo puede justificarse en casos de amenaza real y de manera transitoria. ⚖️ Entonces, ¿está España yendo en contra de las normativas europeas? 🇪🇺❓</p>
            <p class="text-base sm:text-lg leading-relaxed mb-6 dark:text-gray-300">El sector turístico teme que esta medida pueda afectar la competitividad y la confianza de los viajeros. Después de todo, no todos están dispuestos a compartir tanta información personal solo para pasar una noche fuera. 🛌</p>
            <div class="bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 p-4 sm:p-6 my-6">
                <p class="text-yellow-800 dark:text-yellow-200 text-base sm:text-lg">Esta herramienta es una sátira y busca generar conciencia sobre esta normativa. Los datos generados son ficticios y no deben utilizarse en situaciones reales.</p>
            </div>
        </section>

        <!-- Pie de Página -->
        <footer class="text-center border-t border-gray-200 dark:border-gray-700 pt-6 text-gray-600 dark:text-gray-400">
            <p class="text-base sm:text-lg mb-3">🎭 Creado como protesta contra la vigilancia masiva en el sector turístico</p>
            <p class="text-base sm:text-lg mb-4">Con 💩 del Gran Hermano Hotelero</p>
            <div class="space-y-3">
                <p class="text-base sm:text-lg">Para más información sobre esta polémica normativa:</p>
                <div class="flex flex-wrap justify-center gap-4 text-sm sm:text-base">
                    <a href="https://www.eldiario.es/politica/hoteleros-expertos-denuncian-invasion-privacidad-nuevo-registro-viajeros-interior_1_11701914.html" class="text-blue-600 dark:text-blue-400 hover:underline">ElDiario</a>
                    <a href="https://www.boe.es/diario_boe/txt.php?id=BOE-A-2021-17461" class="text-blue-600 dark:text-blue-400 hover:underline">BOE Oficial</a>
                    <a href="https://www.antena3.com/noticias/economia/vulnera-intimidad-nuevo-registro-viajeros_20241202674e19847337f20001b2d2a0.html" class="text-blue-600 dark:text-blue-400 hover:underline">Antena 3</a>
                </div>
            </div>
        </footer>
    </div>
    <script src="codigos-postales-agrupados.js" defer></script>
    <script src="script.js" defer></script>
    <!-- Google Analytics -->
    <script>
        window.addEventListener('load', () => {
            setTimeout(() => {
                // Load Google Tag Manager script
                const gtmScript = document.createElement('script');
                gtmScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-FG69YP4YK3';
                document.head.appendChild(gtmScript);

                // Initialize Google Analytics
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-FG69YP4YK3', {
                    'send_page_view': false,
                    'transport_type': 'beacon'
                });

                // Defer consent and pageview until after page load
                const cookiePreference = localStorage.getItem('cookiePreference');
                gtag('consent', 'default', {
                    'analytics_storage': cookiePreference === 'accepted' ? 'granted' : 'denied'
                });
                gtag('event', 'page_view');
            }, 1000); // Delay by 1 second
        });
    </script>
    <script>
        // Load cookie banner logic after initial render
        window.addEventListener('load', () => {
            const cookieBanner = document.getElementById('cookieBanner');
            const acceptBtn = document.getElementById('acceptCookies');
            const rejectBtn = document.getElementById('rejectCookies');

            // Show banner if needed
            if (!localStorage.getItem('cookiePreference')) {
                requestIdleCallback(() => {
                    cookieBanner.classList.remove('translate-y-full');
                });
            }

            const hideBanner = () => {
                cookieBanner.classList.add('translate-y-full');
                requestAnimationFrame(() => {
                    cookieBanner.style.display = 'none';
                });
            };

            // Use passive event listeners
            acceptBtn.addEventListener('click', () => {
                requestIdleCallback(() => {
                    gtag('consent', 'update', {
                        'ad_storage': 'granted',
                        'ad_user_data': 'granted', 
                        'ad_personalization': 'granted',
                        'analytics_storage': 'granted'
                    });
                    localStorage.setItem('cookiePreference', 'accepted');
                    hideBanner();
                });
            }, {passive: true});

            rejectBtn.addEventListener('click', () => {
                requestIdleCallback(() => {
                    gtag('consent', 'update', {
                        'ad_storage': 'denied',
                        'ad_user_data': 'denied',
                        'ad_personalization': 'denied',
                        'analytics_storage': 'denied'
                    });
                    localStorage.setItem('cookiePreference', 'rejected');
                    hideBanner();
                    
                    requestAnimationFrame(() => {
                        window.location.href = 'https://www.boe.es/diario_boe/txt.php?id=BOE-A-2021-17461';
                    });
                });
            }, {passive: true});
        });
    </script>
    
</body>
</html>
